# Chapter2 文件 I/O 编程



## 底层文件I/O操作

```bash
$ man 2 [系统调用API接口函数名]	# 此命令可以查看系统调用API接口函数的使用格式
```



### 0x00.基本文件操作(系统调用)

例：copy_file.c

函数：

- open() 
- close()
- read()
- write()
- lseek()



### 0x01.文件锁

例：lock_set.c、write_lock.c

函数：

- fcntl()
- lock()



### 0x02.多路复用

例：multiplex_poll.c

函数：

- select()
- poll()



## 串口应用编程(略)



### 0x01串口基础知识

串口最常用的是9芯引脚：                                               OOOOO                                 
第一行从左到右为12345，第二行从左到右为6789        OOOO                                                  

|  1   | 载波检测DCD |  3   |   发送数据TxD   |  5   |  信号地SG   |  7   | 发送请求RTS |  9   | 振铃提示 |
| :--: | :---------: | :--: | :-------------: | :--: | :---------: | :--: | :---------: | :--: | :------: |
|  2   | 接收数据RxD |  4   | 数据终端就绪DTR |  6   | 数据就绪DSR |  8   | 清除发送CTS |      |          |



## 标准I/O编程



### 0x00 文件基本操作(程序调用)

例：fput.c、gets.c、dir.c

函数：

- fopen()
- fclose()
- fread()
- fwrite()
- opendir()
- closedir()
- readdir()

其他文件操作(包括字符输入/输出、行输入/输出、格式化输入/输出等)比较简单不一一列举



## 章节实验



### 0x00.文件读写及上锁



#### 实验内容：

- 在Linux中FIFO是一种进程间的管道通信机制，Linux支持完整的FIFO通信机制。请通过文件操作仿真FIFO结构及生产者-消费者运行模型。



#### 实验源码：

- - producer.c

- - customer.c



### 0x01.多路复用式端口操作

